### 单片机学习通作业总结

- 单片机由运算器 控制器 存储器 输入设备 输出设备 构成

- 微控制器更能反应单片机的本质

- 单片机晶振频率提高, 机器周期变短
  - CPU 完成一项基本操作所需要消耗的最短时间
  - 机器周期 = 12 /  晶振频率
  
- 80c51 是 8 位单片机, 其 PC 计数器是 16 位. 可以寻址 64 KB 的ROM.

- 单片机复位后, SP = 07H, PSW = 00H IP = 00H IE = 00H PC = 0000H  P0 - P3 = FFH

- 80c51 单片机的内部时钟频率的典型值有 6MHZ, 12MHZ, 11.0592MHZ

- 80c51 单片机的时钟产生方式有 内部时钟 和 外部时钟

- 80c51 单片机的复位方式有 上电复位 和 (上电与按键复位, 按键与上电复位)

- 指令可以分为 单周期, 双周期 和 四周期指令.

- 80c51 内部具有 4k 字节的数据存储器.

- 80c51 单片机共有 21 个特殊功能寄存器, 字节地址末尾为 0 或 8 的 SFR 可以进行位寻址, 共 11 个 SFR可以进行位寻址.

- DPTR 是数据指针, 用来存放 16 位地址, 它由两个 8 位的寄存器 DPL DPH 组成, 可访问 64KB 的 RAM 或 ROM 数据 .

- 80C51 的单片机内部有 128 字节的 RAM, 其中包括 32 字节的工作寄存器区, 16 字节的 位寻址区, 80 字节的通用 RAM 区.

- 当前工作寄存器组的选择由特殊功能寄存器中的 程序状态字寄存器 的 RS1 和 RS0 来决定.

- 堆栈指针名称为 SP, 堆栈操作遵循 先进先出, 先进后出 的原则.

- 80C51 单片机 /EA 引脚接高电平时, CPU 从片内程序存储器中开始读指令.

- 特殊功能寄存器 TMOD 可以进行位寻址.

- 80C51 单片机可以作为第二功能使用的口是 P3

- 准双向口与真正的双向口的区别是, 作为输入时需要向口锁存器写入 1

- P0 口作为通过 I/O 口输出时需要外接上拉电阻.

- 51 单片机的寻址方式中基本方式不包括 变址寻址

- 可以作为寄存器间接寻址的寄存器的有 R0 R1 DPTR

- 51 单片机寻址方式中扩展方式的是 变址寻址, 位寻址, 相对寻址.

- 单片机中一条指令分为四个字段 :
  - 标号  操作码  操作数  注释  
  
- 51 单片机指令系统共有 111 条指令.

- 单片机指令按照字节长度分为 :
  - 单字节指令
  - 双字节指令
  - 三字节指令
  
- 寻址方式主要指的是 源操作数 的寻址.

- 字节长的指令执行时间不一定长

- 80C51 单片机指令系统可以分为 : 数据传送类指令, 算术运算类指令, 控制转移类指令, 位操作类指令.

- 访问 SFR 必须使用 直接寻址方式.

- 中断允许控制相关寄存器: IE

  - OAEH : EA 
    - EA = 0 : 中断总禁止, 禁止所有中断, 即不响应任何中断请求.
    - EA = 1 : 中断总允许, 总允许后中断的禁止或允许由各中段源的中断允许控制位进行设置.

  - EX0 (EX1)
    - EX1 = 0 禁止外中断
    - EX1 = 1 允许外中断

  - 复位后, IE = 00H, 因此中断系统处于禁止状态
  - 单片机在中断响应后不会自动关闭中断. 因此在转中断服务程序后, 应使用有关指令禁止中断, 即以软件方式关闭中断.

- 中断控制寄存器 TCON

  - IE0 IE1 外部中断请求标志.
  - IT0 IT1 : 外中断请求触发方式控制位.
  - ITx = 0 低电平触发方式
  - ITx = 1 负跳脉冲触发方式
  - TF0 TF1 定时器溢出中断请求标志位

- 中断优先级控制寄存器 IP

  - PX0 外部中断 0 优先级设定位
  - PX1 外部中断 1 优先级设定位
  - PT0 定时中断 0 优先级设定位
  - PTL 定时中断 1 优先级设定位
  - PS : 串行中断优先级设定位
  - 1 优先级高 0 优先级低

- RETI 中断返回

  - 需要注意的问题 :
  - 现场保护和现场恢复 : 
    - 所谓现场, 指中断时刻, 单片机存储单元中的数据或状态, 一定是主程序和中断程序都用到的且不能被修改的存储单元.
    - 现场保护 : 位于中断处理程序首部， PUSH 操作数
    - 现场恢复 : 位于中断处理程序尾部, POP 操作数
  - 开中断 和 关中断

- ```assembly
  	ORG 0000H
  	AJMP MAIN
  	ORG 0003H
  	AJMP EXT0
  	ORG 0030H
  MAIN: SETB EA ; 打开中断总开关
  	 SETB EX0 ; 打开外部中断 0 中断开关
  	 ; 等同于 MOV IE, #81H
  	 MOV SP, #70H ; 重设堆栈指针
  LOOP: MOV A, #0FFH ;
  	 MOV R2, #08H ; 设左移 8 次
  	 CLR C ;
  ```

- TCON

  - TF1 定时器 T1 中断请求溢出标志位
  - TF0 定时器 T0 中断请求溢出标志位
  - 当计数器产生计数溢出时，相应溢出标志位由硬件置 1, 表示 定时 / 计数 已完成.
  - 它是供查询的状态位. 采用查询方式时，应软件清零; 中断方式时, 由硬件清零.
  - TR1 T1 运行控制位
  - TR0 T0 运行控制位
  - TR1 = 0 关闭T1, TR1 = 1, 启动T1运行. 只由软件置位或清零.  










 