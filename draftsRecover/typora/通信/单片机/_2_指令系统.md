### 指令系统

- 按照所占用字节
  - 单字节 49 条
    - 操作码 和 操作数 同在一个字节中
  - 双字节指令 45 条
    - 一个字节为操作码, 另一个字节是操作数
  - 三字节指令 17 条
    - 操作码 占 1 个字节, 操作数占 2 个 字节.
- 按执行时间来分
  - 1 个机器周期 ( 12 个 时钟振荡周期 ) 的 指令 64条.
  - 2 个机器周期指令 45 条.
  - 4 个 机器周期- 乘 除 指令.
- 指令格式
  - 通常 由 两部分组成 : 操作码 和 操作数
    - 操作码 --- 指令进行什么操作
    - 操作数 -- 数字, 地址...

### 寻址方式

- 1. 寄存器寻址方式

     ```assembly
     MOV  A, Rn ; (Rn) -> A, n = [0, 7]
     ```

     将 Rn 中的源操作数 送入到 累加器 A 中.

     4 组通用工作寄存区共 32 个 工作寄存器. 但只对当前工作寄存器区的 8 个 工作寄存器寻址.指令中的寄存器名称只能是 R0 --R7

     部分特殊功能寄存器, 如 累加器A, 寄存器 B 以及数据指针寄存器 DPTR 等.

  2. 直接寻址方式

     ```assembly
     MOV A, direct;
     ```

     指令直接给出操作数的单元地址, 该单元地址中的内容就是操作数.直接的操作数单元地址用 "direct" 表示.

     ```assembly
     MOV A, 40H;
     ```

     表示把内部RAM 40H单元(direct) 的内容传送给A, 指令中 源操作数 采用的是直接寻址方式.

     指令中的两个操作数都可由直接寻址方式给出.

     ```assembly
     MOV direct1, direct2;
     ```

     ```assembly
     MOV 42H, 62H;
     ```

     把 片内 RAM中 62H单元的内容送到片内RAM中的 42H 单元中.

     直接寻址 是 访问片内所有特殊功能寄存器的唯一寻址方式.

  3. 寄存器间接寻址方式

     ```assembly
     MOV A, @Ri ;
     ```

     寄存器中存的是 操作数地址. 即先从寄存器中找到操作数的地址.再按该地址找到操作数.

     在寄存器前加上 ==@==

     其中, Ri 的 内容是 40H, 即把内部 RAM 40H 地址单元中的内容传送给A.

  4. 立即数寻址方式

     直接在指令中给出操作数--也称立即数.为了与直接寻址指令中的直接地址加以区别, 需要在操作数前缀标志 ==#==

     ```assembly
     MOV A, #40H
     ```

     第一个字节是操作码, 第二个字节是立即数, 就是放在程序存储器内的常数.

  5. 基址寄存器加变址寄存器间址寻址方式

     以 ==DPTR== 和==PC== 作为基址寄存器, 以累加器A作为 变址寄存器, 两者内容相加形成的 16 位地址作为目的地址进行寻址.

     ```assembly
     MOVC A, @A + DPTR
     ```

     (A) = 05H, (DPTR) = 0400H, 指令执行结果是把程序存储器0405H 单元的内容传送给 A.

     ```assembly
     MOVC A, @A + DPTR
     MOVC A, @A + PC
     JMP A, @A + DPTR
     ```

     前 2 条指令适用于读程序存储器中固定的数据. 例如, 将固定的, 按一定顺序排列的表格存放在程序存储器中, 在程序运行中由 A 的动态参量来确定读取对应的表格参数.

     第 3 条 指令为 散转指令, A 中内容 为 程序运行后的动态结果. 可根据 A 中的不同内容, 实现跳向不同程序入口的跳转.

  6. 相对寻址方式

     解决程序转移. 该寻址是以该转移指令的地址 PC 值 加上 它的字节数, 再加上相对偏移量 rel, 形成新的转移目的地址, 从而程序转移到该目的地址.

     转移的目的地址用下式计算 :

     - 目的地址 = 转移指令所在的地址 + 转移指令字节数 + rel

  7. 位寻址方式

     对具有位寻址功能的某位内容进行 置 "1" 或 "0" 操作

     位地址一般以 直接位地址 给出, 位地址符号位 " bit ".

     ```assembly
     MOV C, bit
     ;其具体指令  MOV C, 40H
     ```

     把 位地址 为40H的值送到进位位C.

     位处理功能, 可直接对 数据位 置 1 , 0. 求反, 传送 判跳 逻辑运算等操作.

     | 寻址方式                        | 寻址空间                                |
     | ------------------------------- | --------------------------------------- |
     | 寄存器寻址                      | R0 - R7, A, B, C 位, DPTR等             |
     | 直接寻址                        | 内部 128 字节 RAM, 特殊功能寄存器       |
     | 寄存器间接寻址                  | 片内数据存储器, 片外数据存储器          |
     | 立即数寻址                      | 程序存储器中的立即数                    |
     | 基址寄存器 + 变址寄存器间接寻址 | 读程序存储器固定数据和程序散转          |
     | 相对寻址                        | 程序存储器相对转移                      |
     | 位寻址                          | 内部 RAM 中的可寻址位, SFR 中的可寻址位 |

数据传送指令

```assembly
MOV <目的操作数>, <源操作数> ;
```

复制指令. 但不是移动. 本类指令不影响标志位 : Cy, Ac 和 OV. 但不包括 奇偶标志位 P.

与 外部 RAM  传送数据指令

```asciiarmor
```
