- 项目名称: CurveBS 支持读挂载和写挂载及读写权限转换
- 方案描述: 方案描述: Curve 块存储client 这里的代码整体还是很清晰明了的，可以轻松的知道一些函数的调用
流程，在导师的帮助之下，我很快完成了第一个版本，但我对于 Curve 毕竟是一个新手，很多地方
都没有考虑周全。刚开始做的时候，想法很简单，只需要在现有的 open 接口之上进行一些更改，
让 Open 接口携带上权限信息，并且更改了一系列的函数调用，让 RPCRequest 携带上权限信息，
在 MDS 这里做一个简单的判断即可。但我毕竟是新手，很多地方都没有想的很全面。例如: 在权限
的信息的持久化时，我是将信息保存在内存中，但是这里的 MDS 是拥有主从机制的，当 MDS 发
生选举时，内存数据则就会丢失，所以必须将权限相关数据持久化到 etcd 中去。在导师的帮助之
下，我参考了 class Dlock，在 MDS 这里，设计出了 class WriterLock 类:将获取权限的方式抽象
为 Lock 接口，丢失权限的方式抽象为 Unlock 接口，client 与 MDS 权限续约的方式抽象
UpdateLock 方法。并且将 ip + port 方式标记 client 是不易于调试的，使用 uuid 方式来标记客户
端将数据持久化到 etcd，并且做一些优化。
上一版的设计已经较为全面的，但很多地方设计不是很好，例如在 open 这里，如果当前的块文件已经被读写节点所挂载，那么再使用读写的方式挂载，却仍然可以返回文件描述符，只有当你发起一次 write 请求之后，才会在客户端这里给你返回一个权限错误，这种设计是很臃肿的，我们应该认为上层的客户端如果以错误的权限打开块文件，那么直接返回失败, 而不是再发起  write 请求之后权限错误。
整合接口原有的 Open 接口需要融入更多的打开方式，为了兼容性，引入 Open2 接口，移除原有 struct OpenFlag，使用默认的 int，作为参数，现在的使用方式也更加优雅且更加明确，用户必须指定是否使用 CURVE_SHARED（共享模式）亦或是 CURVE_EXCLUSIVE（互斥模式） 打开块设备：
```c++
/* curve/include/client/libcurve.h */
/* simple example: */
auto fd = Open2("I Love Curve", clientInfo, CURVE_SHARED | CURVE_RDWR);
```
- 项目链接: https://github.com/opencurve/curve/pull/1765
- 时间规划:
  |时间 | 规划| 
  |:-:| :-:|
  |7.1 - 7.18 | 构思项目,学习代码 |
  | 7.20 - 8.5 | 完成第一版可用的代码 |
  | 8.6 - 8.28 | 优化项目 |
  | 8.28 - 9.10 | 完成项目并且合入|
- 项目进度: 基本完成项目要求.
- 遇到的问题: 没遇到什么问题, 除了中间CI有问题.
- 后续工作安排: 坚持现有的学习曲线, 并且参与到Curve社群的建设中.
  

个人的一点感想:

- 感谢开源之夏能给到我这样的一个机会让我能够参与到Curve社群的开发中, 在参与的过程中, 我以一个自由个人开发者的名义不断向社群贡献代码, 同时会与社群的开发者不断交流我的Pr, 并且帮助社群做了一些事情. 最后我加入到了社群中. 作为一名高校开发者, 我认为开源社群的运作离不开广大开发者的参与, 但加入到开源社群贡献的难度对于初级开发者是有挑战性的, 开源之夏这样的平台则是一个很好的桥介, 促使社群的开发者帮助学生们参与到社群的建设中.
- 此前, 我更多认为的是: 开源的这种方式无非是各大公司的利益驱使, 人来人往, 皆为利者. 但我的这种想法是如此的极端, 但当我真正的参与到社群中时, 我发现且皆为利而不往, 社群是一个团体, 各自有各自的职责, 大家一起去做很多有趣的事情, 我在参与的过程中, 为社群做了一些细节的优化, 以及参与README的重写, 还有一些与社群开发者交流完成的小项目, 我并不是以一个公司所签约劳动合同名义的开发者来参与社群, 完全凭自身的爱好及兴趣, 我同时拥有无限的自由以及无限的责任, 者都让我感受到了来自开源社群的魅力.
- 我的很多行动都离不开社群的管理者的帮助, 在此, 感谢社群运营和lxc还有我的导师, 他们在这个过程中都给予了我极大的帮助和鼓励, 社群管理者对于外部成员的接纳也是极为重要的. 信任是一个很有意义的话题, 对于社群管理者来说, 将任务分发给有这样的能力的并且正在参与社群外部成员, 自己站在一个外部开发者的伙伴的立场, 这可能减轻了自己的一些压力, 同时也让外部成员有参与社群的机会, 合作是开源社群的第一要素, 也是接纳外部开发者的强力方式.
- 感谢此次活动, 希望未来能够联动到更多的社群, 鼓励并宣传更多想要参与其中来的人.
